<navigation-bar title="{{title}}" back="{{true}}" color="black" background="{{navBg}}" opacity="{{navOpacity}}"></navigation-bar>
<!-- å¢åŠ scrolläº‹ä»¶ç›‘å¬ï¼Œç”¨äºæ»šåŠ¨æ•ˆæœè®¡ç®— -->
<scroll-view class="scrollarea" scroll-y type="list" bindscroll="onPageScroll">
  <view class="container">
    <!-- ã€æ–°å¢ã€‘é¤å…åˆ†ç±»èœå•ï¼ˆä»…é¤å…æ¿å—æ˜¾ç¤ºï¼‰ -->
    <view class="category-container" wx:if="{{type === 'restaurant'}}">
      <scroll-view scroll-x class="category-scroll">
        <view class="category-tag {{activeCategory === item.id ? 'active' : ''}}" 
              wx:for="{{categories}}" 
              wx:key="id"
              data-id="{{item.id}}"
              bindtap="onCategoryTap">
          {{item.name}}
        </view>
      </scroll-view>
    </view>

    <!-- åŠ è½½ä¸­çŠ¶æ€ -->
    <view class="loading" wx:if="{{isLoading}}">
      <text class="loading-icon">ğŸ”„</text>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <!-- åˆ—è¡¨å†…å®¹ï¼ˆç»™æ¯ä¸ªåˆ—è¡¨é¡¹åŠ åŠ¨ç”»ç±»ï¼Œä½¿ç”¨filteredListæ¸²æŸ“ï¼‰ -->
    <block wx:elif="{{filteredList.length > 0}}">
      <view 
        class="card animate-item" 
        wx:for="{{filteredList}}" 
        wx:key="id"
        bindtap="{{type === 'restaurant' ? 'showRestaurantIntro' : 'onItemTap'}}"
        data-id="{{item.id}}"
        data-item="{{item}}"
        style="animation-delay: {{index * 0.1}}s;"
      >
        <image 
          class="card-img" 
          src="{{item.image}}" 
          mode="aspectFill" 
          wx:if="{{item.image}}"
          lazy-load="{{true}}"
        ></image>
        <view class="card-img" wx:else></view>
        <view class="card-info">
          <view class="card-title">{{item.title}}</view>
          <view class="card-desc">{{item.desc}}</view>
          <view class="card-tags" wx:if="{{item.tags && item.tags.length > 0}}">
            <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
          </view>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:else>
      <text class="empty-icon">ğŸ“­</text>
      <text>{{emptyText}}</text>
    </view>
  </view>
</scroll-view>

<!-- é¤å…ä»‹ç»å¼¹æ¡† -->
<view class="intro-modal" wx:if="{{showIntro && type === 'restaurant'}}" bindtap="closeIntro">
  <view class="modal-content" catchtap="stopPropagation">
    <text class="modal-title">{{currentRestaurant.title}}</text>
    <image class="modal-img" src="{{currentRestaurant.image}}" mode="aspectFill" />
    <view class="modal-base-tags">
      <text class="base-tag" wx:for="{{currentRestaurant.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
    </view>
    <view class="modal-section">
      <text class="section-title">é¤å…ä»‹ç»</text>
      <text class="modal-desc">{{currentRestaurant.detailDesc}}</text>
    </view>
    <view class="modal-section">
      <text class="section-title">åº—é“ºåœ°å€</text>
      <text class="modal-desc">{{currentRestaurant.address}}</text>
    </view>
    <view class="modal-section">
      <text class="section-title">è¥ä¸šæ—¶é—´</text>
      <text class="modal-desc">{{currentRestaurant.businessTime}}</text>
    </view>
    <button class="close-btn" bindtap="closeIntro">å…³é—­</button>
  </view>
</view>